<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vue Gezegenine Yolculuk</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@200&display=swap');
        @import url('style/style.css');
    </style>

</head>

<body>

    <!-- message to the world -->
    <div id="planetAPP">
        <div class="logoCapsule">
            <img src="./img/vue-planet.png" alt="">
            <h2>Vue <br> Gezegenine Yolculuk</h2>
        </div>

        <div class="firstMission mission">
            <h2 class="missionNumb">1. Görev</h2>
            <div class="messageWorld">
                <textarea v-model="message"></textarea>
                <p class="fromMessage">Evan</p>
                <button v-on:click="messageSend">Gönder</button>
                <p class="messageStatus">{{ messageStatus }}</p>
                <p class="messageInfo"> {{ from }} <br> {{ messageContent }}</p>
                <p class="messageTime">{{ time }}</p>
            </div>
        </div>
    </div>
    <!-- message to the world -->

    <hr>

    <!-- open the door -->

    <div id="planetApp2">
        <h2 class="missionNumb">2. Görev</h2>

        <div class="progressBar" id="progressBar">
            <div class="progress" :style="progressWidth"></div>
        </div>

        <div class="stage">% {{ load }}</div>
        <div class="status">{{ status }}</div>

        <button class="btn decrase" @click="decrase">Süreci Bitir</button>
        <button class="btn increase" @click="increase">Süreci Başlat</button>
    </div>

    <!-- open the door -->

    <script>
        var firstMission = new Vue({
            el: '#planetAPP',
            data: {
                message: '',
                from: '',
                messageStatus: '',
                messageContent: '',
                time: '',
            },
            methods: {
                messageSend: function () {
                    this.messageStatus = 'Mesaj gönderiliyor..';
                    var planetAPP = this;

                    setTimeout(function () {
                        planetAPP.messageStatus = 'Mesajınız başarıyla gönderildi.';
                        planetAPP.from = 'Gönderen: Evan';
                        planetAPP.messageContent = planetAPP.message;
                        planetAPP.time = new Date().toLocaleString();
                    }, 2000);
                }
            }
        });

        var secondMission = new Vue({
            el: '#planetApp2',
            data: {
                load: 0,
                progressWidth: '',
                processingIncrease: '',
                processingDecrease: '',
                status: 'Aktif bir işlem bulunmuyor.',
            },
            methods: {
                decrase: function () {
                    clearInterval(this.processingIncrease);
                    var vm = this;
                    this.processingDecrease = setInterval(function () {
                        if (vm.load > 0) {
                            vm.status = 'İşlem iptal ediliyor...';
                            vm.load -= 5;
                        } else {
                            vm.load = 0;
                            vm.status = 'Kapılar kapatıldı.';
                        }
                    }, 500);
                },
                increase: function () {
                    clearInterval(this.processingDecrease);
                    var vm = this;
                    this.processingIncrease = setInterval(function () {
                        if (vm.load < 100) {
                            vm.status = 'İşlem tamamlanıyor...';
                            vm.load += 5;
                        } else {
                            vm.status = 'Kapılar açıldı.';
                            vm.load = 100;
                        }
                    }, 1000);
                }
            },
            watch: {
                load: function () {
                    this.progressWidth = 'width: ' + this.load + '%';
                }
            }
        })
    </script>
</body>

</html>